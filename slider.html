<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Slider</title>
    <style>
        #slider {
            width: 300px;
            height: 200px;
            position: relative;
            border: 1px solid;
        }

        .slide {
            position: absolute;
            width: 100%;
            height: 100%;
            display: none;
        }

        .slide.active {
            display: block;
        }

        .nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background-color: rgba(149, 138, 138, 0.592);
            color: white;
            padding: 10px;
            cursor: pointer;
        }

        #prev {
            left: 10px;
        }

        #next {
            right: 10px;
        }

        [id ^='image'] {
            border: 1px solid;
            padding: 1px 5px;
            margin-top: 10px;
            text-decoration: none;
            color: red;
            display: inline-block;
        }
    </style>
    <script>
        window.addEventListener("load", function () {
            const slideImages = document.querySelectorAll(".slide");
            // slideImage =" quelque chose";
            // slideImages.forEach(function (elementSlide) {
            //     elementSlide.classList.add("active");
            // });

            let pos = 0;
            document.querySelector("#next").addEventListener("click", function (event_next) {

                //'pos' augmente 1 sauf si on Ã©tait positionnÃ© Ã  la derniÃ¨re image, dans ce cas pos vaut 0
                if (pos == slideImages.length - 1) {
                    pos = 0;
                } else {
                    pos++
                }

                //Retire la class 'active' Ã  toutes les images
                slideImages.forEach(function (elementSlide) {
                    elementSlide.classList.remove("active")
                })

                //Ajoute la class 'active' Ã  la prochaine image
                slideImages[pos].classList.add("active");

            });

            document.querySelector("#prev").addEventListener("click", function (event_next) {

                if (pos == 0) {
                    pos = slideImages.length - 1;
                } else {
                    pos--;
                }

                slideImages.forEach(function (elementSlide) {
                    elementSlide.classList.remove("active")
                });

                slideImages[pos].classList.add("active");

            });

            let timer = setInterval(function () {
                // on peut dÃ©clancher un Ã©venement avec la mÃ©thode
                // dispatchEvent
                document.querySelector("#next").dispatchEvent(new Event("click"));
            }, 2000);
            document.querySelector("stop").addEventListener("click", function () {
                /* la fonction clearInterval arrÃªte l'Ã©xÃ©cution automatiquement dÃ©fini avec setInterval. Il faut passer la valeur retournÃ©e par un setInterval pour arrÃªter le processus voulu.*/
            })

            //     setInterval(function(){
            //         console.log(temp++);
            //     }, 1000);

            //event c'est pour fournir des info sur l'evenement dÃ©clenchÃ©
            /*let lienImage1 = document.querySelector("#image1");
            lienImage1.addEventListener("click", function(event){
            const slideImages = document.querySelectorAll(".slide");
            slideImages.forEach( function(elementSlide){
                elementSlide.classList.remove("active")
            });
            slideImages[0].classList.add("active");
            clearInterval(timer);
            });*/

            /** 
             * Avec querySelectorAll("[id ^='image']"), je rÃ©cupÃ¨re tous les Ã©lÃ©ments HTML don l'attribut'id' commence par 'image'.
             * 
             * La mÃ©thode forEach va me permettre de mettre un Ã©couteur
             * d'Ã©vÃ¨nement sur chacun des Ã©lÃ©ments HTML.
             * **/
            document.querySelectorAll("[id ^='image']").forEach(function (element) {
                /** j'ajoute une Ã©couteur d'Ã©venement sur l'Ã©venement 'click'*/
                element.addEventListener("click", function (event) {
                    /** La constante slideImage contient tous les Ã©lÃ©ments HTML qui ont 
                     * la class 'slide'. */
                    const slideImages = document.querySelectorAll(".slide");

                    /** Je retire la classe 'active' sur chacun des Ã©lÃ©ments de cette liste : 
                     * ==> aucune image n'est affichÃ©e */
                    slideImages.forEach(function (elementSlide) {
                        elementSlide.classList.remove("active");
                    });
                    let identifiant = this.id;
                    /* Dans cette valeur , je remplace la chaÃ®ne de caractÃ¨re 'image' par une chaÃ®ne de caractÃ¨re vide. Donc il ne me reste que "1"ou "2" ou "3"*/
                    let numero = identifiant.replace("image", "");
                    /* En JS, si une chaÃ®ne de caractÃ¨res ne contient que des chiffres, elle peut Ãªtre utilisÃ©e comme un type 'number.
                    Je dÃ©crÃ©mente le numÃ©ros pour avoir la position de l'image dans la liste slideImages*/
                    numero--;
                    /* J'ajoute la classe 'active' Ã  l'image qui correspond
                    ==> cette image est visible dans le slide */
                    slideImages[numero].classList.add("active");
                    /* J'arrÃªte le dÃ©filement automatique du slider */
                    clearInterval(timer);
                })
            });
        });
    </script>
</head>
<div id="slider">
    <img src="img/image1.webp" alt="" class="slide active">
    <img src="img/image2.webp" alt="" class="slide">
    <img src="img/image3.webp" alt="" class="slide">
    <button id="prev" class="nav">&lt;</button>
    <button id="next" class="nav">&gt;</button>
    <button class="nav" title="arrÃªter le slider" id="stop">ðŸ”˜</button>
</div>
<div>
    <a href="#1" id="image1">1</a>
    <a href="#2" id="image2">2</a>
    <a href="#3" id="image3">3</a>
</div>

<!-- EXERCICE : lorsque l'utilisateur clique sur un lien image1, image2, image3,
    l'image affichÃ© par le slider doit Ãªtre la 1Ã¨re ou la 2 iÃ¨me ou la 3iÃ¨me.
    EXERCICE CSS : mettre le bouton stop au milieu du slider
-->

<body>
</body>

</html>